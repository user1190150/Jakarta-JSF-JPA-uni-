<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Bearbeiten - Artikel</title>
	<h:outputStylesheet library="css" name="style.css" />
</h:head>
<h:body>
<h1>Artikel - Bearbeiten</h1>
	<h:form>
		<h:panelGrid columns="2" styleClass="artikeltabelle">
			<h:outputLabel for="id" value="Id: " />
			<h:inputText id="id" value="#{artikelController.aktuellerArtikel.id}" />
			
			<h:outputLabel for="name" value="Name: " />
			<h:inputText id="name" 
						 value="#{artikelController.aktuellerArtikel.name}" 
						 required="true" >
			</h:inputText>
			
			<h:outputLabel for="gtin" value="GTIN: " />
			<h:inputText id="gtin" 
						 value="#{artikelController.aktuellerArtikel.gtin}" 
						 validator="#{artikelController.validateGtin}">
			</h:inputText>
			
			
			<h:outputLabel for="beschreibung" value="Beschreibung: " />
			<p:textEditor id="beschreibung" 
						  value="#{artikelController.aktuellerArtikel.beschreibung}"
						  secure="false">
			</p:textEditor>
						  
			<h:outputLabel for="verfuegbar" value="Verfügbar ab: " />		 
			<p:calendar id="verfuegbar" 
						value="#{artikelController.aktuellerArtikel.verfuegbarAb}" 
						pattern="dd.MM.yyyy">
			</p:calendar>
			
			<h:outputLabel for="preis" value="Preis: " />
			<h:inputText id="preis" 
						 value="#{artikelController.aktuellerArtikel.preis}"
						 required="true">
				<f:validateDoubleRange minimum="1" maximum="10000" />				
			</h:inputText>
			
			
			<h:outputLabel for="bild" value="Bild: " />
            <h:inputText id="bild" value="#{artikelController.aktuellerArtikel.bild}">
                <!-- AJAX, das Bild aktualisiert, wenn der Pfad geändert wird -->
                <p:ajax event="keyup" update="bildPreview" />
                <f:validateRegex pattern="[a-zA-Z0-9]+.(jpg|jpeg|gif|png)" />
            </h:inputText>

            <h:outputLabel for="bildPreview" value="Bildvorschau: " />
            <h:graphicImage id="bildPreview" 
                            value="/resources/images/#{artikelController.aktuellerArtikel.bild}" 
                            style="height:150px; width:200px;" />
                            
											
			<h:panelGroup layout="block" styleClass="button-container">
			<h:commandButton value="Speichern" action="#{artikelController.speichereArtikel}" />
        	<h:commandButton value="Abbrechen" action="startseite?faces-redirect=true" />
			</h:panelGroup>			
		</h:panelGrid>
		
		<div class="flex-div">
		<span><h:message for="name" /></span>
		<span><h:message for="bild" /></span>
		<span><h:message for="gtin" /></span>
		</div>
				
	</h:form>	
	<i>Upload File is comming soon...</i>
			
</h:body>
</html>